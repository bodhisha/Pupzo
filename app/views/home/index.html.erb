<div class="max-w-3xl mx-auto my-8">
  <%= form_for Post.new do |f| %>
  <%= f.text_field :description , class:"flex justify-center w-2/3  border-2 border-gray-400"%>
  <%= f.file_field :image ,class:"pt-2" %>
  <%= f.submit "Create Post", class:" rounded p-1 bg-blue-400 justify-center mt-2"%>
  <% end %>
</div>
<hr class="border-gray-500 mt-6" />

<div class="flex mt-4 max-w-3xl mx-auto justify-center">
  <div>
    <% @posts.each do |post| %>
    <div class="bg-gray-200 border-2 border-gray-400 p-4 pb-8 my-4 rounded">
      <div class="flex w-full">
        <%= link_to  user_path(post.user) do%>
        <% if post.user.avatar.attached? %>
        <%= image_tag  post.user.avatar ,class:"rounded-full my-2 h-12 w-12 border-solid border-4 border-black"  %>
        <%end%>
        <%end%>
        <%= link_to user_path(post.user) do %>
        <h3 class="text-xl  font-bold px-2 py-4">@ <%=  post.user.username%></h3>
        <%end%>
      </div>
      <%= link_to post_path(post) do %>
      <% if post.image.attached? %>
      <%= image_tag post.image ,class:"rounded"%>
      <% end %>
      <%end%>
      <%= button_to post_likes_path(post), method: :post  do  %>
      <i class="far fa-heart text-red-700 text-2xl pt-2"></i>
      <%end%>
      <h3 class="text-sm text-gray-600 "><%= post.likes.count %><%=post.likes.count <= 1 ? " like" : " likes"%></h3>
      <h3 class="text-lg font-bold pb-2"><%= post.description%></h3>


      <% post.comments.last(2).each do |comment| %>
      <h3 class="text-sm  rounded-lg font-bold  pt-1  "><%=  comment.user.username%>:
        <span class="font-normal">
          <%= comment.body%>
        </span>
      </h3>
      <%end%>
      <%if(post.comments.count > 2)%>
      <%= link_to post_path(post) do %>
      <h3 class="float-right text-gray-600 "> View All <%= post.comments.count%> Comments </h3>
      <%end%>
      <%end%>
    </div>

    <% end %>
  </div>
</div>